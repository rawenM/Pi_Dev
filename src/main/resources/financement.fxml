<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.geometry.Insets?>

<HBox xmlns="http://javafx.com/javafx/20.0.2"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="Controllers.FinancementController"
      spacing="0" styleClass="page">

    <!-- Navigation Sidebar -->
    <VBox prefWidth="220" styleClass="sidebar">
        <HBox alignment="CENTER_LEFT" spacing="8">
            <Label text="ðŸ’¼" style="-fx-font-size:20px;"/>
            <Label text="GreenLedger Financement" styleClass="sidebar-title"/>
        </HBox>

        <Separator styleClass="sidebar-sep"/>

        <Button fx:id="btnDashboard" text="ðŸ“Š Tableau de bord" styleClass="nav-btn"/>
        <Button fx:id="btnFinancement" text="ðŸ’³ Financement" styleClass="nav-btn"/>
        <Button fx:id="btnOffres" text="ðŸ§¾ Offres" styleClass="nav-btn"/>

        <Separator styleClass="sidebar-sep"/>

        <Button fx:id="btnNewFinancement" text="âž• Nouveau" styleClass="nav-btn"/>
        <Button fx:id="btnRefresh" text="ðŸ”„ Actualiser" styleClass="nav-btn"/>

        <!-- Spacer to push content to bottom -->
        <Region VBox.vgrow="ALWAYS"/>
    </VBox>

    <!-- Content -->
    <VBox spacing="0" HBox.hgrow="ALWAYS" styleClass="content-area">

        <!-- Stats Section -->
        <HBox spacing="16" alignment="CENTER_LEFT">
            <padding>
                <Insets top="28" right="32" bottom="20" left="32"/>
            </padding>

            <VBox spacing="6" styleClass="stat-card" HBox.hgrow="ALWAYS">
                <Label text="FINANCEMENTS" styleClass="stat-title"/>
                <Label text="0" styleClass="stat-value accent-green"/>
                <Label text="ðŸ¦" style="-fx-font-size:18px;"/>
            </VBox>

            <VBox spacing="6" styleClass="stat-card" HBox.hgrow="ALWAYS">
                <Label text="OFFRES" styleClass="stat-title"/>
                <Label text="0" styleClass="stat-value accent-blue"/>
                <Label text="ðŸ§¾" style="-fx-font-size:18px;"/>
            </VBox>

            <VBox spacing="6" styleClass="stat-card" HBox.hgrow="ALWAYS">
                <Label text="PROJETS" styleClass="stat-title"/>
                <Label text="0" styleClass="stat-value accent-amber"/>
                <Label text="ðŸ“" style="-fx-font-size:18px;"/>
            </VBox>
        </HBox>

        <ScrollPane fitToWidth="true" fitToHeight="true" VBox.vgrow="ALWAYS"
                    style="-fx-background-color: transparent; -fx-background: transparent;">
            <VBox spacing="24">
                <padding>
                    <Insets top="8" right="32" bottom="32" left="32"/>
                </padding>

                <!-- Project Selection Section -->
                <VBox spacing="12">
                    <HBox alignment="CENTER_LEFT" spacing="8">
                        <Label text="ðŸ“" style="-fx-font-size:18px;"/>
                        <Label text="SÃ©lection Projet" styleClass="page-title"/>
                    </HBox>
                    <ComboBox fx:id="cmbProjetSelector"
                              promptText="SÃ©lectionner Projet"
                              styleClass="field"
                              prefWidth="400"/>
                </VBox>

                <!-- Financement Section -->
                <VBox spacing="12" styleClass="card">
                    <padding>
                        <Insets top="20" right="20" bottom="20" left="20"/>
                    </padding>

                    <HBox alignment="CENTER_LEFT" spacing="8">
                        <Label text="ðŸ¦" style="-fx-font-size:18px;"/>
                        <Label text="Table2: Financement" styleClass="page-title"/>
                    </HBox>

                    <TableView fx:id="tableFinancement"
                               styleClass="table-card selectable-table"
                               style="-fx-pref-height:200px;">
                        <placeholder>
                            <VBox alignment="CENTER" spacing="8" style="-fx-padding:40;">
                                <Label text="ðŸ“‹" style="-fx-font-size:32px; -fx-opacity:0.3;"/>
                                <Label text="Aucun financement" styleClass="placeholder-label"/>
                            </VBox>
                        </placeholder>
                        <columns>
                            <TableColumn fx:id="colFinId" text="ID" prefWidth="70"/>
                            <TableColumn fx:id="colFinProjetId" text="Projet ID" prefWidth="100"/>
                            <TableColumn fx:id="colFinBanqueId" text="Banque ID" prefWidth="110"/>
                            <TableColumn fx:id="colFinMontant" text="Montant" prefWidth="140"/>
                            <TableColumn fx:id="colFinDate" text="Date Financement" prefWidth="160"/>
                        </columns>
                    </TableView>

                    <Separator/>

                    <!-- Financement Form -->
                    <HBox spacing="12">
                        <VBox spacing="8" HBox.hgrow="ALWAYS">
                            <Label text="Projet ID" styleClass="form-label"/>
                            <TextField promptText="Ex:12" styleClass="field"/>
                        </VBox>
                        <VBox spacing="8" HBox.hgrow="ALWAYS">
                            <Label text="Banque ID" styleClass="form-label"/>
                            <TextField promptText="Ex:5" styleClass="field"/>
                        </VBox>
                        <VBox spacing="8" HBox.hgrow="ALWAYS">
                            <Label text="Montant" styleClass="form-label"/>
                            <TextField promptText="Ex:15000" styleClass="field"/>
                        </VBox>
                        <VBox spacing="8" HBox.hgrow="ALWAYS">
                            <Label text="Date" styleClass="form-label"/>
                            <TextField promptText="YYYY-MM-DD" styleClass="field"/>
                        </VBox>
                    </HBox>

                    <HBox spacing="12">
                        <Button fx:id="btnAddFinancement"
                                text="âž• Ajouter"
                                styleClass="btn btn-primary"
                                prefHeight="36"
                                prefWidth="140"/>
                        <Button fx:id="btnEditFinancement"
                                text="âœï¸ Modifier"
                                styleClass="btn btn-secondary"
                                prefHeight="36"
                                prefWidth="140"/>
                        <Button fx:id="btnDeleteFinancement"
                                text="ðŸ—‘ï¸ Supprimer"
                                styleClass="btn btn-danger"
                                prefHeight="36"
                                prefWidth="140"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Button fx:id="btnExportFinancement"
                                text="ðŸ“¥ Exporter"
                                styleClass="btn btn-secondary"
                                prefHeight="36"
                                prefWidth="140"/>
                    </HBox>
                </VBox>

                <!-- Offres Section -->
                <VBox spacing="12" styleClass="card">
                    <padding>
                        <Insets top="20" right="20" bottom="20" left="20"/>
                    </padding>

                    <HBox alignment="CENTER_LEFT" spacing="8">
                        <Label text="ðŸ§¾" style="-fx-font-size:18px;"/>
                        <Label text="Table1: Offre de financement" styleClass="page-title"/>
                    </HBox>

                    <TableView fx:id="tableOffres" prefHeight="220" minHeight="220"
                               VBox.vgrow="ALWAYS"
                               styleClass="table-card table-projects">
                        <placeholder>
                            <Label text="Aucune offre" styleClass="placeholder-label"/>
                        </placeholder>
                        <columns>
                            <TableColumn fx:id="colOffreId" text="ID Offre" prefWidth="80"/>
                            <TableColumn fx:id="colOffreType" text="Type Offre" prefWidth="130"/>
                            <TableColumn fx:id="colOffreTaux" text="Taux" prefWidth="90"/>
                            <TableColumn fx:id="colOffreDuree" text="DurÃ©e" prefWidth="110"/>
                            <TableColumn fx:id="colOffreFinancementId" text="Financement ID" prefWidth="140"/>
                        </columns>
                    </TableView>

                    <Separator/>

                    <!-- Offre Form -->
                    <HBox spacing="12">
                        <VBox spacing="8" HBox.hgrow="ALWAYS">
                            <Label text="Type Offre" styleClass="form-label"/>
                            <TextField promptText="Ex: Long terme" styleClass="field"/>
                        </VBox>
                        <VBox spacing="8" prefWidth="150">
                            <Label text="Taux" styleClass="form-label"/>
                            <TextField promptText="%%" styleClass="field"/>
                        </VBox>
                        <VBox spacing="8" prefWidth="150">
                            <Label text="DurÃ©e" styleClass="form-label"/>
                            <TextField promptText="Mois" styleClass="field"/>
                        </VBox>
                        <VBox spacing="8" prefWidth="180">
                            <Label text="Financement ID" styleClass="form-label"/>
                            <TextField promptText="Ex:3" styleClass="field"/>
                        </VBox>
                    </HBox>

                    <HBox spacing="12">
                        <Button text="âž• Ajouter Offre" styleClass="btn-primary"/>
                        <Button text="âœï¸ Modifier Offre" styleClass="btn-secondary"/>
                        <Button text="ðŸ—‘ï¸ Supprimer Offre" styleClass="btn-danger"/>
                    </HBox>
                </VBox>

            </VBox>
        </ScrollPane>

    </VBox>
</HBox>
