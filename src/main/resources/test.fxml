<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>

<HBox xmlns="http://javafx.com/javafx/20.0.2"
      xmlns:fx="http://javafx.com/fxml/1"
    fx:controller="Controllers.CarbonAuditController"
    styleClass="page">

    <!-- Sidebar -->
    <VBox prefWidth="220" styleClass="sidebar">

        <HBox alignment="CENTER_LEFT" spacing="8">
            <Label text="ðŸƒ" style="-fx-font-size: 20px;"/>
            <Label text="GreenLedger Test" styleClass="sidebar-title"/>
        </HBox>

        <Separator styleClass="sidebar-sep"/>

        <Label text="ðŸ“ Gestion Projets" styleClass="nav-btn"/>
        <Label text="ðŸ“Š Ã‰valuations" styleClass="nav-btn"/>

        <Region VBox.vgrow="ALWAYS"/>

        <Button fx:id="btnSettings" text="âš™ Settings" onAction="#showSettings" styleClass="nav-btn"/>
    </VBox>

    <!-- Content Area -->
    <VBox spacing="0" HBox.hgrow="ALWAYS" styleClass="content-area">

        <!-- Stats Section -->
        <HBox spacing="16" alignment="CENTER_LEFT">
            <padding>
                <Insets top="28" right="32" bottom="20" left="32"/>
            </padding>

            <VBox spacing="6" styleClass="stat-card" HBox.hgrow="ALWAYS">
                <Label text="Ã‰VALUATIONS" styleClass="stat-title"/>
                <Label text="0" styleClass="stat-value accent-green"/>
                <Label text="ðŸ“Š" style="-fx-font-size: 18px;"/>
            </VBox>

            <VBox spacing="6" styleClass="stat-card" HBox.hgrow="ALWAYS">
                <Label text="PROJETS DISPONIBLES" styleClass="stat-title"/>
                <Label text="0" styleClass="stat-value accent-blue"/>
                <Label text="ðŸ“" style="-fx-font-size: 18px;"/>
            </VBox>

            <VBox spacing="6" styleClass="stat-card" HBox.hgrow="ALWAYS">
                <Label text="CRITÃˆRES" styleClass="stat-title"/>
                <Label text="0" styleClass="stat-value accent-amber"/>
                <Label text="âš–ï¸" style="-fx-font-size: 18px;"/>
            </VBox>
        </HBox>

        <ScrollPane fitToWidth="true" fitToHeight="true" VBox.vgrow="ALWAYS"
                    style="-fx-background-color: transparent; -fx-background: transparent;">
            <VBox spacing="24">
                <padding>
                    <Insets top="8" right="32" bottom="32" left="32"/>
                </padding>

                <!-- Project Selection -->
                <VBox spacing="12">
                    <HBox alignment="CENTER_LEFT" spacing="8">
                        <Label text="ðŸ“" style="-fx-font-size: 18px;"/>
                        <Label text="SÃ©lection Projet" styleClass="page-title"/>
                    </HBox>
                    <ComboBox fx:id="comboProjet"
                              promptText="SÃ©lectionner un projet"
                              styleClass="field"
                              prefWidth="400"/>
                </VBox>

                <!-- Evaluations Table -->
                <VBox spacing="12">
                    <HBox alignment="CENTER_LEFT" spacing="8">
                        <Label text="ðŸ“‹" style="-fx-font-size: 18px;"/>
                        <Label text="Ã‰valuations RÃ©centes" styleClass="page-title"/>
                    </HBox>
                    <TableView fx:id="tableAudits"
                               styleClass="table-card"
                               style="-fx-pref-height: 220px;">
                        <placeholder>
                            <VBox alignment="CENTER" spacing="8" style="-fx-padding: 40;">
                                <Label text="ðŸ“‹" style="-fx-font-size: 32px; -fx-opacity: 0.3;"/>
                                <Label text="Aucune Ã©valuation" styleClass="placeholder-label"/>
                            </VBox>
                        </placeholder>
                        <columns>
                            <TableColumn fx:id="colDate" text="Date" prefWidth="120"/>
                            <TableColumn fx:id="colDecision" text="DÃ©cision" prefWidth="120"/>
                            <TableColumn fx:id="colProjetNom" text="Titre" prefWidth="200"/>
                            <TableColumn fx:id="colObservations" text="Observations" prefWidth="400"/>
                        </columns>
                    </TableView>
                </VBox>

                <!-- Projects Table -->
                <VBox spacing="12">
                    <HBox alignment="CENTER_LEFT" spacing="8">
                        <Label text="ðŸ“‚" style="-fx-font-size: 18px;"/>
                        <Label text="Projets Disponibles" styleClass="page-title"/>
                    </HBox>
                    <TableView fx:id="tableProjets"
                               styleClass="table-card"
                               style="-fx-pref-height: 280px;">
                        <placeholder>
                            <VBox alignment="CENTER" spacing="8" style="-fx-padding: 40;">
                                <Label text="ðŸ“‚" style="-fx-font-size: 32px; -fx-opacity: 0.3;"/>
                                <Label text="Aucun projet disponible" styleClass="placeholder-label"/>
                            </VBox>
                        </placeholder>
                        <columns>
                            <TableColumn fx:id="colProjetTitre" text="Titre" prefWidth="180"/>
                            <TableColumn fx:id="colProjetDescription" text="Description" prefWidth="300"/>
                            <TableColumn fx:id="colProjetBudget" text="Budget" prefWidth="120"/>
                            <TableColumn fx:id="colProjetScore" text="Score ESG" prefWidth="100"/>
                            <TableColumn fx:id="colProjetStatut" text="Statut" prefWidth="140"/>
                        </columns>
                    </TableView>
                </VBox>

                <!-- Evaluation Form -->
                <VBox spacing="16" styleClass="card">
                    <padding>
                        <Insets top="24" right="24" bottom="24" left="24"/>
                    </padding>

                    <HBox alignment="CENTER_LEFT" spacing="8">
                        <Label text="âœï¸" style="-fx-font-size: 18px;"/>
                        <Label text="Nouvelle Ã‰valuation" styleClass="page-title"/>
                    </HBox>

                    <Separator/>

                    <HBox spacing="12">
                        <VBox spacing="8" prefWidth="150">
                            <Label text="ID Projet" styleClass="form-label"/>
                            <TextField fx:id="txtIdProjet"
                                       editable="false"
                                       focusTraversable="false"
                                       styleClass="field field-readonly"/>
                        </VBox>
                        <VBox spacing="8" HBox.hgrow="ALWAYS">
                            <Label text="DÃ©cision" styleClass="form-label"/>
                            <TextField fx:id="txtDecision"
                                       promptText="Ex: ApprouvÃ©, En attente"
                                       styleClass="field"/>
                        </VBox>
                    </HBox>

                    <VBox spacing="8">
                        <Label text="Observations" styleClass="form-label"/>
                        <TextArea fx:id="txtObservations"
                                  promptText="Notes dÃ©taillÃ©es..."
                                  wrapText="true"
                                  styleClass="field textarea"
                                  style="-fx-pref-height: 90px;"/>
                    </VBox>

                    <Separator/>

                    <HBox spacing="12">
                        <Button text="âž• Ajouter Ã‰valuation"
                                onAction="#ajouterEvaluation"
                                styleClass="btn-primary"/>
                        <Button text="âœï¸ Modifier Ã‰valuation"
                                onAction="#modifierEvaluation"
                                styleClass="btn-secondary"/>
                        <Button text="ðŸ—‘ï¸ Supprimer Ã‰valuation"
                                onAction="#supprimerEvaluation"
                                styleClass="btn-danger"/>
                    </HBox>
                </VBox>

                <!-- Criteria Section -->
                <VBox spacing="16" styleClass="card">
                    <padding>
                        <Insets top="24" right="24" bottom="24" left="24"/>
                    </padding>

                    <HBox alignment="CENTER_LEFT" spacing="8">
                        <Label text="âš–ï¸" style="-fx-font-size: 18px;"/>
                        <Label text="CritÃ¨res d'Impact" styleClass="page-title"/>
                    </HBox>

                    <TableView fx:id="tableCriteres"
                               styleClass="table-card"
                               style="-fx-pref-height: 180px;">
                        <placeholder>
                            <VBox alignment="CENTER" spacing="8" style="-fx-padding: 40;">
                                <Label text="âš–ï¸" style="-fx-font-size: 32px; -fx-opacity: 0.3;"/>
                                <Label text="Aucun critÃ¨re" styleClass="placeholder-label"/>
                            </VBox>
                        </placeholder>
                        <columns>
                            <TableColumn fx:id="colCritereNom" text="Nom" prefWidth="200"/>
                            <TableColumn fx:id="colCritereNote" text="Note" prefWidth="100"/>
                            <TableColumn fx:id="colCritereCommentaire" text="Commentaire" prefWidth="540"/>
                        </columns>
                    </TableView>

                    <Separator/>

                    <HBox spacing="12">
                        <VBox spacing="8" HBox.hgrow="ALWAYS">
                            <Label text="Nom du critÃ¨re" styleClass="form-label"/>
                            <TextField fx:id="txtNomCritere"
                                       promptText="Ex: Impact Carbone"
                                       styleClass="field"/>
                        </VBox>
                        <VBox spacing="8" prefWidth="150">
                            <Label text="Note" styleClass="form-label"/>
                            <TextField fx:id="txtNote"
                                       promptText="0-100"
                                       styleClass="field"/>
                        </VBox>
                    </HBox>

                    <VBox spacing="8">
                        <Label text="Commentaire" styleClass="form-label"/>
                        <TextArea fx:id="txtCommentaireCritere"
                                  promptText="DÃ©tails techniques..."
                                  wrapText="true"
                                  styleClass="field textarea"
                                  style="-fx-pref-height: 70px;"/>
                    </VBox>

                    <HBox spacing="12">
                        <Button text="âž• Ajouter CritÃ¨re"
                                onAction="#ajouterCritere"
                                styleClass="btn-primary"/>
                        <Button text="âœï¸ Modifier CritÃ¨re"
                                onAction="#modifierCritere"
                                styleClass="btn-secondary"/>
                        <Button text="ðŸ—‘ï¸ Supprimer CritÃ¨re"
                                onAction="#supprimerCritere"
                                styleClass="btn-danger"/>
                    </HBox>
                </VBox>

            </VBox>
        </ScrollPane>

    </VBox>

</HBox>
